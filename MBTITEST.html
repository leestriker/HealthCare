<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì‹¬í”Œ MBTI í…ŒìŠ¤íŠ¸</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #6366f1;
      --secondary: #a855f7;
      --bg: #f8fafc;
      --text: #1e293b;
    }

    body {
      margin: 0;
      font-family: 'Pretendard', -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    /* ë©”ì¸ ì¹´ë“œ ì»¨í…Œì´ë„ˆ */
    .app-container {
      width: 100%;
      max-width: 480px;
      min-height: 500px;
      background: white;
      margin: 20px;
      border-radius: 24px;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      position: relative;
    }

    .content {
      flex: 1;
      padding: 40px 30px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }

    /* í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
    h1 { color: var(--primary); font-size: 1.8rem; margin-bottom: 10px; }
    h2 { font-size: 1.5rem; margin: 20px 0; word-break: keep-all; line-height: 1.4; }
    p { color: #64748b; font-size: 1rem; line-height: 1.6; }
    .emoji { font-size: 4rem; margin-bottom: 20px; animation: float 3s ease-in-out infinite; }

    /* ì§„í–‰ë°” */
    .progress-area {
      width: 100%;
      padding: 30px 30px 0 30px;
      box-sizing: border-box;
    }
    .progress-track {
      width: 100%;
      height: 8px;
      background: #e2e8f0;
      border-radius: 10px;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      transition: width 0.4s ease;
    }
    .step-text {
      text-align: right;
      font-size: 0.85rem;
      color: #94a3b8;
      margin-top: 8px;
    }

    /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .btn {
      width: 100%;
      padding: 16px;
      border: none;
      border-radius: 16px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.2s;
    }
    .btn-primary {
      background: var(--primary);
      color: white;
      margin-top: 20px;
    }
    .btn-primary:hover { background: #4f46e5; transform: translateY(-2px); }
    
    .btn-option {
      background: #f1f5f9;
      color: #334155;
      margin-bottom: 12px;
      text-align: left;
      line-height: 1.4;
      border: 2px solid transparent;
    }
    .btn-option:hover {
      background: white;
      border-color: var(--primary);
      color: var(--primary);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
    .spinner {
      width: 50px;
      height: 50px;
      border: 5px solid #e2e8f0;
      border-top-color: var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 20px;
    }

    /* ê²°ê³¼ í™”ë©´ */
    .result-badge {
      background: #e0e7ff;
      color: var(--primary);
      padding: 6px 16px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .result-title {
      font-size: 3.5rem;
      font-weight: 800;
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin: 10px 0;
    }
    .result-desc {
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      padding: 20px;
      border-radius: 16px;
      margin-bottom: 20px;
      color: #334155;
      font-weight: 600;
    }

    /* íŠ¸ëœì§€ì…˜ íš¨ê³¼ */
    .fade-enter-active, .fade-leave-active { transition: opacity 0.3s ease; }
    .fade-enter-from, .fade-leave-to { opacity: 0; }
    
    @keyframes spin { to { transform: rotate(360deg); } }
    @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
  </style>
</head>
<body>

  <div id="app">
    <div class="app-container">
      
      <div class="progress-area" v-if="step === 'question'">
        <div class="progress-track">
          <div class="progress-fill" :style="{ width: progress + '%' }"></div>
        </div>
        <div class="step-text">Step {{ currentQuestionIndex + 1 }} / 5</div>
      </div>

      <transition name="fade" mode="out-in">
        
        <div v-if="step === 'start'" key="start" class="content">
          <div class="emoji">ğŸ”®</div>
          <h1>ì´ˆê°„ë‹¨ MBTI</h1>
          <p>5ê°œì˜ ì§ˆë¬¸ìœ¼ë¡œ ì•Œì•„ë³´ëŠ”<br>ë‚˜ì˜ ìˆ¨ê²¨ì§„ ì„±ê²© ìœ í˜•</p>
          <button @click="startTest" class="btn btn-primary">í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°</button>
        </div>

        <div v-else-if="step === 'question'" key="question" class="content">
          <h2>{{ currentQuestion.q }}</h2>
          <div style="width: 100%;">
            <button 
              v-for="(ans, idx) in currentQuestion.a" 
              :key="idx" 
              class="btn btn-option"
              @click="selectAnswer(ans.type)">
              {{ ans.text }}
            </button>
          </div>
        </div>

        <div v-else-if="step === 'loading'" key="loading" class="content">
          <div class="spinner"></div>
          <h2>ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...</h2>
          <p>ë‹¹ì‹ ì˜ ì‘ë‹µì„ ê³„ì‚°í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
        </div>

        <div v-else-if="step === 'result'" key="result" class="content">
          <div class="result-badge">ë‹¹ì‹ ì˜ ìœ í˜•ì€</div>
          <div class="result-title">{{ finalMBTI }}</div>
          <div class="result-desc">{{ resultDescription }}</div>
          <button @click="resetTest" class="btn btn-primary">ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°</button>
        </div>

      </transition>
    </div>
  </div>

  <script>
    const { createApp, ref, computed } = Vue;

    createApp({
      setup() {
        // --- ìƒíƒœ ê´€ë¦¬ ---
        const step = ref('start'); // start, question, loading, result
        const currentQuestionIndex = ref(0);
        const scores = ref({ E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 });

        // --- 5ë‹¨ê³„ ì§ˆë¬¸ ë°ì´í„° ---
        // 5ë¬¸ì œë¡œ 4ê°€ì§€ ì§€í‘œë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ 1, 5ë²ˆ ë¬¸ì œëŠ” E/I(ì™¸í–¥/ë‚´í–¥)ë¥¼ ì¤‘ë³µ ì²´í¬í•©ë‹ˆë‹¤.
        const questions = [
          {
            q: "ì£¼ë§ì— ê°‘ìê¸° ì•½ì†ì´ ì·¨ì†Œë˜ì—ˆë‹¤ë©´?",
            a: [
              { text: "ì•„ì‹¸! ì§‘ì—ì„œ ë„·í”Œë¦­ìŠ¤ ë³´ë©° íë§í•œë‹¤ (ë‚´í–¥)", type: "I" },
              { text: "ì•„ì‰½ë‹¤... ë‹¤ë¥¸ ì¹œêµ¬ì—ê²Œ ì—°ë½í•´ë³¸ë‹¤ (ì™¸í–¥)", type: "E" }
            ]
          },
          {
            q: "ë¹„í–‰ê¸°ë¥¼ íƒ€ê³  ì—¬í–‰ì„ ê°ˆ ë•Œ ë‚˜ëŠ”?",
            a: [
              { text: "ê¸°ë‚´ì‹ì€ ë­˜ê¹Œ? ë„ì°©í•˜ë©´ ë‚ ì”¨ëŠ”? (í˜„ì‹¤)", type: "S" },
              { text: "ë¹„í–‰ê¸°ê°€ ì¶”ë½í•˜ë©´ ì–´ë–¡í•˜ì§€? ë¬´ì¸ë„? (ìƒìƒ)", type: "N" }
            ]
          },
          {
            q: "ì¹œêµ¬ê°€ ìš°ìš¸í•´ì„œ ë¨¸ë¦¬ë¥¼ ì˜ëë‹¤ê³  í•œë‹¤ë©´?",
            a: [
              { text: "ì™œ ìš°ìš¸í•´? ë¬´ìŠ¨ ì¼ ìˆì–´? (ì´ìœ )", type: "T" },
              { text: "í—ã… ã…  ê¸°ë¶„ ì „í™˜ì€ ì¢€ ëì–´? ì˜ˆì˜ë‹¤! (ê³µê°)", type: "F" }
            ]
          },
          {
            q: "ì—¬í–‰ ê³„íšì„ ì§¤ ë•Œ ë‚˜ëŠ”?",
            a: [
              { text: "ì‹œê°„ ë‹¨ìœ„ë¡œ ì—‘ì…€ì— ì •ë¦¬í•´ì•¼ ë§ˆìŒì´ í¸í•˜ë‹¤", type: "J" },
              { text: "ì¼ë‹¨ í° í‹€ë§Œ ì¡ê³  ê°€ì„œ í•„ ê½‚íˆëŠ” ëŒ€ë¡œ ë‹¤ë‹Œë‹¤", type: "P" }
            ]
          },
          {
            q: "ë‚¯ì„  ì‚¬ëŒë“¤ì´ ë§ì€ íŒŒí‹°ì¥ì— ê°”ì„ ë•Œ?",
            a: [
              { text: "ìƒˆë¡œìš´ ì‚¬ëŒë“¤ì—ê²Œ ë¨¼ì € ë§ì„ ê±´ë‹¤ (ì™¸í–¥)", type: "E" },
              { text: "êµ¬ì„ì´ë‚˜ ì•„ëŠ” ì‚¬ëŒ ì˜†ì— ë¶™ì–´ ìˆëŠ”ë‹¤ (ë‚´í–¥)", type: "I" }
            ]
          }
        ];

        // --- Computed Properties ---
        const currentQuestion = computed(() => questions[currentQuestionIndex.value]);
        
        const progress = computed(() => {
          return ((currentQuestionIndex.value + 1) / questions.length) * 100;
        });

        const finalMBTI = computed(() => {
          const s = scores.value;
          let result = "";
          // ì ìˆ˜ê°€ ê°™ìœ¼ë©´ ë’¤ìª½ ìœ í˜•(I, N, F, P)ì´ ê¸°ë³¸ê°’ì´ ë˜ë„ë¡ ì„¤ì •
          result += s.E > s.I ? "E" : "I";
          result += s.S >= s.N ? "S" : "N";
          result += s.T >= s.F ? "T" : "F";
          result += s.J >= s.P ? "J" : "P";
          return result;
        });

        const resultDescription = computed(() => {
          const descriptions = {
            'ESTJ': 'í˜„ì‹¤ì ì´ê³  êµ¬ì²´ì ì¸ ë¦¬ë”', 'ESTP': 'ëª¨í—˜ì„ ì¦ê¸°ëŠ” ì‚¬ì—…ê°€',
            'ESFJ': 'ì¹œì ˆí•˜ê³  ì‚¬êµì ì¸ ì™¸êµê´€', 'ESFP': 'ë¶„ìœ„ê¸° ë©”ì´ì»¤ ì—°ì˜ˆì¸',
            'ENTJ': 'ëŒ€ë‹´í•œ í†µì†”ì', 'ENTP': 'ëœ¨ê±°ìš´ ë…¼ìŸì„ ì¦ê¸°ëŠ” ë³€ë¡ ê°€',
            'ENFJ': 'ì •ì˜ë¡œìš´ ì‚¬íšŒìš´ë™ê°€', 'ENFP': 'ì¬ê¸°ë°œë„í•œ í™œë™ê°€',
            'ISTJ': 'ì²­ë ´ê²°ë°±í•œ ë…¼ë¦¬ì£¼ì˜ì', 'ISTP': 'ë§ŒëŠ¥ ì¬ì£¼ê¾¼',
            'ISFJ': 'ìš©ê°í•œ ìˆ˜í˜¸ì', 'ISFP': 'í˜¸ê¸°ì‹¬ ë§ì€ ì˜ˆìˆ ê°€',
            'INTJ': 'ìš©ì˜ì£¼ë„í•œ ì „ëµê°€', 'INTP': 'ë…¼ë¦¬ì ì¸ ì‚¬ìƒ‰ê°€',
            'INFJ': 'ì„ ì˜ì˜ ì˜¹í˜¸ì', 'INFP': 'ì—´ì •ì ì¸ ì¤‘ì¬ì',
          };
          return descriptions[finalMBTI.value] || "ì•Œ ìˆ˜ ì—†ëŠ” ì‹ ë¹„ë¡œìš´ ìœ í˜•";
        });

        // --- Methods ---
        const startTest = () => { step.value = 'question'; };

        const selectAnswer = (type) => {
          scores.value[type]++; // ì ìˆ˜ ì¦ê°€

          if (currentQuestionIndex.value < questions.length - 1) {
            currentQuestionIndex.value++; // ë‹¤ìŒ ë¬¸ì œ
          } else {
            // ë§ˆì§€ë§‰ ë¬¸ì œë¼ë©´ ë¡œë”© í™”ë©´ ë³´ì—¬ì£¼ê¸°
            step.value = 'loading';
            setTimeout(() => {
              step.value = 'result';
            }, 1500); // 1.5ì´ˆ í›„ ê²°ê³¼ í‘œì‹œ
          }
        };

        const resetTest = () => {
          scores.value = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
          currentQuestionIndex.value = 0;
          step.value = 'start';
        };

        return {
          step, questions, currentQuestionIndex, currentQuestion,
          progress, finalMBTI, resultDescription,
          startTest, selectAnswer, resetTest
        };
      }
    }).mount('#app');
  </script>
</body>
</html>