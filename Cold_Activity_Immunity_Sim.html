<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¶”ìœ„ì™€ í™œë™ëŸ‰, ê·¸ë¦¬ê³  ë©´ì—­ë ¥ ì‹œë®¬ë ˆì´í„°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700;900&display=swap" rel="stylesheet">
    
    <!-- Palette: 'Frost & Fire' -->
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .chart-container {
            position: relative;
            width: 100%;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        /* Range Slider Custom Styling */
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            background: transparent;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 24px;
            width: 24px;
            border-radius: 50%;
            background: #f97316;
            cursor: pointer;
            margin-top: -10px;
            box-shadow: 0 0 5px rgba(0,0,0,0.3);
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: #cbd5e1;
            border-radius: 2px;
        }
        .gauge-container {
            position: relative;
            height: 150px;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
    </style>
</head>
<body class="bg-gray-100">

    <!-- Header -->
    <header class="bg-[#1e3a8a] text-white py-12 px-4 shadow-lg">
        <div class="max-w-6xl mx-auto text-center">
            <h1 class="text-3xl md:text-5xl font-black mb-4">ì¶”ìœ„, í™œë™ëŸ‰, ê·¸ë¦¬ê³  ë©´ì—­ë ¥</h1>
            <p class="text-lg md:text-xl text-[#bfdbfe] font-light max-w-2xl mx-auto">
                ê¸°ì˜¨ì´ 1Â°C ë–¨ì–´ì§ˆ ë•Œ ë‚´ ëª¸ì€ ì–´ë–»ê²Œ ë³€í• ê¹Œìš”?<br>
                <strong>ì¸í„°ë™í‹°ë¸Œ ì‹œë®¬ë ˆì´í„°</strong>ë¡œ í™•ì¸í•´ë³´ì„¸ìš”.
            </p>
        </div>
    </header>

    <main class="max-w-6xl mx-auto p-4 md:p-8 space-y-12">

        <!-- NEW: Interactive Simulator Section -->
        <section class="bg-white rounded-xl shadow-xl border-t-8 border-[#f97316] p-6 md:p-10 overflow-hidden relative">
            <div class="absolute top-0 right-0 p-4 opacity-10 text-9xl pointer-events-none">â„ï¸</div>
            
            <h2 class="text-3xl font-bold text-[#1e3a8a] mb-2">ğŸŒ¡ï¸ ì²´ì˜¨-ë©´ì—­ë ¥ ì‹œë®¬ë ˆì´í„°</h2>
            <p class="text-gray-600 mb-8">
                ì•„ë˜ ìŠ¬ë¼ì´ë”ë¥¼ ì›€ì§ì—¬ <strong>í˜„ì¬ ê¸°ì˜¨</strong>ì„ ì„¤ì •í•˜ì„¸ìš”. ê¸°ì˜¨ ë³€í™”ì— ë”°ë¥¸ ì‹ ì²´ í™œì„±ë„ì™€ ë©´ì—­ ìœ„í—˜ë„ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤.
            </p>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-10 items-center">
                <!-- Control Panel -->
                <div class="bg-gray-50 p-6 rounded-xl border border-gray-200">
                    <label for="tempSlider" class="block text-sm font-bold text-gray-700 mb-4">
                        í˜„ì¬ ê¸°ì˜¨ ì„¤ì • (â„ƒ)
                    </label>
                    
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-blue-600 font-bold">-20â„ƒ</span>
                        <span class="text-red-500 font-bold">20â„ƒ</span>
                    </div>
                    
                    <input type="range" id="tempSlider" min="-20" max="20" value="5" step="1" class="w-full mb-6">
                    
                    <div class="text-center">
                        <span class="text-sm text-gray-500">ì„¤ì •ëœ ê¸°ì˜¨</span>
                        <div class="text-5xl font-black text-[#1e3a8a] mt-2" id="currentTempDisplay">5â„ƒ</div>
                        <div class="text-sm text-[#f97316] font-bold mt-2" id="tempStatus">í™œë™ ì ì • ê¸°ì¤€</div>
                    </div>

                    <div class="mt-8 text-xs text-gray-500 space-y-2 bg-white p-3 rounded border">
                        <p><strong>*ê³„ì‚° ì•Œê³ ë¦¬ì¦˜:</strong></p>
                        <ul class="list-disc pl-4 space-y-1">
                            <li>ê¸°ì¤€ì : 5â„ƒ (í™œë™ ì„ê³„ì )</li>
                            <li>1â„ƒ í•˜ë½ ì‹œ ê·¼ìœ¡ í™œë™: <span class="text-red-500">-4.5%</span></li>
                            <li>1â„ƒ í•˜ë½ ì‹œ ê·¼ìœ¡ ê¸´ì¥: <span class="text-red-500">+3.0%</span></li>
                            <li>1â„ƒ í•˜ë½ ì‹œ ë©´ì—­ ìœ„í—˜: <span class="text-red-500">+2.8%</span></li>
                        </ul>
                    </div>
                </div>

                <!-- Visualization Panel -->
                <div class="lg:col-span-2 grid grid-cols-1 sm:grid-cols-3 gap-6">
                    
                    <!-- Metric 1: Muscle Activity -->
                    <div class="text-center">
                        <h4 class="font-bold text-gray-700 mb-2">ê·¼ìœ¡ í™œë™ì„±</h4>
                        <div class="gauge-container">
                            <canvas id="gaugeActivity"></canvas>
                        </div>
                        <p class="text-sm text-gray-500 mt-2" id="textActivity">ì •ìƒ ìˆ˜ì¤€</p>
                    </div>

                    <!-- Metric 2: Muscle Stiffness -->
                    <div class="text-center">
                        <h4 class="font-bold text-gray-700 mb-2">ê·¼ìœ¡/í˜ˆê´€ ê¸´ì¥ë„</h4>
                        <div class="gauge-container">
                            <canvas id="gaugeStiffness"></canvas>
                        </div>
                        <p class="text-sm text-gray-500 mt-2" id="textStiffness">ìœ ì—°í•¨</p>
                    </div>

                    <!-- Metric 3: Immunity Risk -->
                    <div class="text-center">
                        <h4 class="font-bold text-gray-700 mb-2">ë©´ì—­ë ¥ ì €í•˜ ìœ„í—˜</h4>
                        <div class="gauge-container">
                            <canvas id="gaugeImmunity"></canvas>
                        </div>
                        <p class="text-sm text-gray-500 mt-2" id="textImmunity">ì•ˆì „</p>
                    </div>

                </div>
            </div>
        </section>

        <!-- Original Data Section 1: Trend -->
        <section class="bg-white rounded-xl shadow-md p-6 md:p-8">
            <h2 class="text-2xl font-bold text-[#1e3a8a] mb-2">ê¸°ì˜¨ê³¼ í™œë™ëŸ‰ì˜ ìƒê´€ê´€ê³„ ë°ì´í„°</h2>
            <p class="text-gray-600 mb-6">
                ì‹¤ì œ ì›”ë³„ ë°ì´í„°ì—ì„œë„ ê¸°ì˜¨ì´ ì˜í•˜ë¡œ ë–¨ì–´ì§€ëŠ” ì‹œì ì— í™œë™ëŸ‰ì´ ê¸‰ê°í•˜ëŠ” 'í™œë™ ê³µë°±ê¸°'ê°€ ëšœë ·í•˜ê²Œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.
            </p>
            <div class="chart-container">
                <canvas id="tempActivityChart"></canvas>
            </div>
        </section>

        <!-- Original Data Section 2: Solutions -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="bg-white rounded-xl shadow-md p-6">
                <h2 class="text-xl font-bold text-[#1e3a8a] mb-4">ë©´ì—­ë ¥ì„ ì§€í‚¤ëŠ” ê²¨ìš¸ ìš´ë™ ìˆœìœ„</h2>
                <div class="chart-container" style="height: 300px;">
                    <canvas id="solutionChart"></canvas>
                </div>
            </div>
            <div class="bg-white rounded-xl shadow-md p-6 flex flex-col justify-center">
                <h3 class="text-lg font-bold text-[#f97316] mb-4">ğŸ’¡ ì™œ 'ì‹¤ë‚´ ê³„ë‹¨ ì˜¤ë¥´ê¸°'ì¸ê°€?</h3>
                <ul class="space-y-4">
                    <li class="flex items-start">
                        <span class="bg-[#1e3a8a] text-white rounded-full w-6 h-6 flex items-center justify-center mr-3 text-sm flex-shrink-0">1</span>
                        <p class="text-gray-700 text-sm"><strong>ì²´ì˜¨ ìƒìŠ¹ ì†ë„:</strong> í‰ì§€ ê±·ê¸°ë³´ë‹¤ 2ë°° ë¹ ë¥´ê²Œ ì²´ì˜¨ì„ ë†’ì—¬ ë©´ì—­ ì„¸í¬ë¥¼ í™œì„±í™”í•©ë‹ˆë‹¤.</p>
                    </li>
                    <li class="flex items-start">
                        <span class="bg-[#1e3a8a] text-white rounded-full w-6 h-6 flex items-center justify-center mr-3 text-sm flex-shrink-0">2</span>
                        <p class="text-gray-700 text-sm"><strong>ì•ˆì „ì„±:</strong> ì°¨ê°€ìš´ ê³µê¸°ë¡œ ì¸í•œ í˜¸í¡ê¸° ìê·¹ê³¼ ë¹™íŒê¸¸ ë‚™ìƒ ìœ„í—˜ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                    </li>
                    <li class="flex items-start">
                        <span class="bg-[#1e3a8a] text-white rounded-full w-6 h-6 flex items-center justify-center mr-3 text-sm flex-shrink-0">3</span>
                        <p class="text-gray-700 text-sm"><strong>ê·¼ë ¥ ê°•í™”:</strong> í™œë™ëŸ‰ ë¶€ì¡±ìœ¼ë¡œ ì•½í•´ì§€ê¸° ì‰¬ìš´ í•˜ì²´ ê·¼ìœ¡ì„ íš¨ê³¼ì ìœ¼ë¡œ ìê·¹í•©ë‹ˆë‹¤.</p>
                    </li>
                </ul>
            </div>
        </section>

    </main>

    <script>
        // --- Common Helpers ---
        function formatLabel(str) {
            if (str.length <= 16) return str;
            const words = str.split(' ');
            const lines = [];
            let currentLine = words[0];
            for (let i = 1; i < words.length; i++) {
                if ((currentLine + " " + words[i]).length < 16) {
                    currentLine += " " + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        const commonTooltipOptions = {
            callbacks: {
                title: function(tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    return Array.isArray(label) ? label.join(' ') : label;
                }
            }
        };

        // ==========================================
        // SIMULATOR LOGIC (Javascript Calculation)
        // ==========================================
        
        // 1. Setup Gauge Charts
        const gaugeOptions = {
            responsive: true,
            maintainAspectRatio: false,
            cutout: '80%',
            plugins: { tooltip: { enabled: false }, legend: { display: false } },
            events: [] // Disable hover events for static feel
        };

        // Helper to create gauge chart
        function createGauge(ctx, color) {
            return new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Value', 'Remainder'],
                    datasets: [{
                        data: [100, 0],
                        backgroundColor: [color, '#e5e7eb'],
                        borderWidth: 0
                    }]
                },
                options: gaugeOptions,
                plugins: [{
                    id: 'textCenter',
                    beforeDraw: function(chart) {
                        var width = chart.width, height = chart.height, ctx = chart.ctx;
                        ctx.restore();
                        var fontSize = (height / 114).toFixed(2);
                        ctx.font = "bold " + fontSize + "em sans-serif";
                        ctx.textBaseline = "middle";
                        ctx.fillStyle = "#1f2937";
                        
                        var text = chart.data.datasets[0].data[0] + "%",
                            textX = Math.round((width - ctx.measureText(text).width) / 2),
                            textY = height / 2;
                        ctx.fillText(text, textX, textY);
                        ctx.save();
                    }
                }]
            });
        }

        const chartActivity = createGauge(document.getElementById('gaugeActivity').getContext('2d'), '#3b82f6');
        const chartStiffness = createGauge(document.getElementById('gaugeStiffness').getContext('2d'), '#f97316');
        const chartImmunity = createGauge(document.getElementById('gaugeImmunity').getContext('2d'), '#ef4444');

        // 2. Calculation Logic
        const tempSlider = document.getElementById('tempSlider');
        const currentTempDisplay = document.getElementById('currentTempDisplay');
        const tempStatus = document.getElementById('tempStatus');
        
        // Text outputs
        const textActivity = document.getElementById('textActivity');
        const textStiffness = document.getElementById('textStiffness');
        const textImmunity = document.getElementById('textImmunity');

        function updateSimulator() {
            const temp = parseInt(tempSlider.value);
            currentTempDisplay.innerText = temp + "â„ƒ";

            // Baseline: 5C.
            // Formula:
            // If temp < 5:
            //   Delta = 5 - temp
            //   Activity Drop = Delta * 4.5 (Max 100)
            //   Stiffness Increase = Delta * 3.0 (Max 100)
            //   Immunity Risk = Delta * 2.8 (Max 100)
            
            let delta = 0;
            let activityVal = 100;
            let stiffnessVal = 0;
            let immunityRiskVal = 0;

            if (temp < 5) {
                delta = 5 - temp;
                tempStatus.innerText = "âš ï¸ ì¶”ìœ„ ë…¸ì¶œ ë‹¨ê³„";
                tempStatus.className = "text-sm text-blue-600 font-bold mt-2";
                
                // Calculate
                activityVal = Math.max(10, 100 - (delta * 4.5)); // Drops
                stiffnessVal = Math.min(100, delta * 3.0); // Increases
                immunityRiskVal = Math.min(90, delta * 2.8); // Increases
            } else {
                tempStatus.innerText = "âœ… í™œë™ ì ì • ê¸°ì˜¨";
                tempStatus.className = "text-sm text-green-600 font-bold mt-2";
                
                // Reset to optimal
                activityVal = 100;
                stiffnessVal = 0;
                immunityRiskVal = 0;
            }

            // Update Charts
            chartActivity.data.datasets[0].data = [Math.round(activityVal), 100 - Math.round(activityVal)];
            chartActivity.update();

            chartStiffness.data.datasets[0].data = [Math.round(stiffnessVal), 100 - Math.round(stiffnessVal)];
            chartStiffness.update();

            chartImmunity.data.datasets[0].data = [Math.round(immunityRiskVal), 100 - Math.round(immunityRiskVal)];
            chartImmunity.update();

            // Update Text Description
            if (activityVal < 50) textActivity.innerText = "í™œë™ëŸ‰ ì‹¬ê°í•œ ì €í•˜";
            else if (activityVal < 80) textActivity.innerText = "í™œë™ëŸ‰ ê°ì†Œ ì‹œì‘";
            else textActivity.innerText = "ì •ìƒ í™œë™ ìˆ˜ì¤€";

            if (stiffnessVal > 60) textStiffness.innerText = "ë¶€ìƒ ìœ„í—˜ ë§¤ìš° ë†’ìŒ";
            else if (stiffnessVal > 20) textStiffness.innerText = "ê·¼ìœ¡ ê²½ì§ ì‹œì‘";
            else textStiffness.innerText = "ìœ ì—°í•œ ìƒíƒœ";

            if (immunityRiskVal > 50) textImmunity.innerText = "ì§ˆë³‘ ì·¨ì•½ ìƒíƒœ";
            else if (immunityRiskVal > 20) textImmunity.innerText = "ì£¼ì˜ í•„ìš”";
            else textImmunity.innerText = "ì•ˆì „ ìƒíƒœ";
        }

        // Initialize listener
        tempSlider.addEventListener('input', updateSimulator);
        
        // Initial call
        updateSimulator();


        // ==========================================
        // EXISTING CHARTS (Static Data)
        // ==========================================

        // Temp vs Activity Chart
        const ctx1 = document.getElementById('tempActivityChart').getContext('2d');
        new Chart(ctx1, {
            type: 'bar',
            data: {
                labels: ['1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”', '7ì›”', '8ì›”', '9ì›”', '10ì›”', '11ì›”', '12ì›”'],
                datasets: [
                    {
                        label: 'í‰ê·  ê¸°ì˜¨ (Â°C)',
                        data: [-2.5, 0.3, 5.8, 12.2, 17.5, 22.1, 25.4, 26.2, 21.5, 15.0, 7.8, 0.5],
                        type: 'line',
                        borderColor: '#f97316',
                        backgroundColor: '#f97316',
                        borderWidth: 3,
                        yAxisID: 'y1',
                        tension: 0.4,
                        order: 0
                    },
                    {
                        label: 'í‰ê·  í™œë™ëŸ‰ (ë³´í–‰ìˆ˜)',
                        data: [4500, 5100, 6800, 8200, 9500, 9200, 8100, 7800, 9800, 10500, 8500, 5200],
                        backgroundColor: '#3b82f6',
                        borderRadius: 4,
                        order: 1,
                        yAxisID: 'y'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: { mode: 'index', intersect: false },
                plugins: {
                    tooltip: commonTooltipOptions,
                    legend: { position: 'top' }
                },
                scales: {
                    y: { display: true, position: 'left', grid: { display: false } },
                    y1: { display: true, position: 'right', grid: { color: '#e5e7eb' } }
                }
            }
        });

        // Solution Ranking Chart
        const ctx5 = document.getElementById('solutionChart').getContext('2d');
        const formattedLabels = ['ì‹¤ë‚´ ê³„ë‹¨ ì˜¤ë¥´ê¸°', 'ê³ ê°•ë„ í™ˆíŠ¸ë ˆì´ë‹', 'ë”°ëœ»í•œ ë¬¼ ìˆ˜ì˜', 'ì‹¤ë‚´ ìŠ¤íŠ¸ë ˆì¹­', 'ì¶”ìš´ ì•¼ì™¸ ì¡°ê¹…'].map(formatLabel);
        new Chart(ctx5, {
            type: 'bar',
            data: {
                labels: formattedLabels,
                datasets: [{
                    label: 'ë©´ì—­ íš¨ìœ¨ì„± ì ìˆ˜',
                    data: [92, 88, 75, 60, 45],
                    backgroundColor: ['#f97316', '#fb923c', '#3b82f6', '#60a5fa', '#94a3b8'],
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false }, tooltip: commonTooltipOptions },
                scales: { x: { max: 100, grid: { display: false } }, y: { grid: { display: false } } }
            }
        });

    </script>
</body>
</html>